file(GLOB_RECURSE SEASOCKS_SOURCE_FILES . *.cpp *.h)
set(SEASOCKS_SOURCE_FILES ${SEASOCKS_SOURCE_FILES} $<TARGET_OBJECTS:embedded>)
add_library(seasocks STATIC ${SEASOCKS_SOURCE_FILES})
add_library(seasocks_so SHARED ${SEASOCKS_SOURCE_FILES})
set_target_properties(seasocks_so PROPERTIES OUTPUT_NAME seasocks)

install(TARGETS seasocks seasocks_so
        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
        ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
        RUNTIME DESTINATION ${CMAKE_INSTALL_LIBDIR}
        )
install(DIRECTORY seasocks
        DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
        FILES_MATCHING PATTERN "*.h"
        )
